<div class="invoice-list-container fade-in">
  <div class="page-header">
    <div>
      <h1>Factures</h1>
      <p class="subtitle">Consultez toutes les factures générées</p>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters-card card">
    <div class="filters-grid">
      <div class="search-box">
        <i class="bi bi-search"></i>
        <input 
          type="text" 
          placeholder="Rechercher une facture..." 
          [(ngModel)]="searchTerm"
          (input)="onSearchChange()"
          class="search-input"
        />
      </div>
      
      <select 
        [(ngModel)]="statusFilter" 
        (change)="onStatusFilterChange()"
        class="filter-select"
      >
        <option value="all">Tous les statuts</option>
        <option value="paid">Payées</option>
        <option value="pending">En attente</option>
      </select>
    </div>
  </div>

  <!-- Invoices Table -->
  <div class="table-card card">
    <div class="table-header">
      <h3>Liste des factures ({{ totalItems }})</h3>
    </div>
    
    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>Numéro</th>
            <th>Date</th>
            <th>Client</th>
            <th>Montant</th>
            <th>Statut</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let invoice of displayedInvoices" class="invoice-row">
            <td>
              <strong>{{ invoice.invoice_number }}</strong>
            </td>
            <td>{{ invoice.issue_date | date:'short' }}</td>
            <td>{{ invoice.customer_name }}</td>
            <td class="price">{{ invoice.total | currencyFormat }}</td>
            <td>
              <span class="status-badge" [class.paid]="invoice.payment_status === 'paid'" [class.pending]="invoice.payment_status === 'pending'">
                {{ invoice.payment_status === 'paid' ? 'Payée' : 'En attente' }}
              </span>
            </td>
            <td>
              <div class="action-buttons">
                <a [routerLink]="['/invoices/view', invoice.id]" class="action-btn view" title="Voir détails">
                  <i class="bi bi-eye"></i>
                </a>
                <button class="action-btn print" title="Imprimer" (click)="printInvoice(invoice.id)">
                  <i class="bi bi-printer"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      
      <div *ngIf="displayedInvoices.length === 0 && !isLoading" class="empty-state">
        <i class="bi bi-receipt" style="font-size: 64px; opacity: 0.3;"></i>
        <p>Aucune facture trouvée</p>
      </div>
    </div>
    
    <!-- Pagination -->
    <app-pagination
      *ngIf="totalItems > 0"
      [currentPage]="currentPage"
      [totalPages]="totalPages"
      [pageSize]="pageSize"
      [totalItems]="totalItems"
      (pageChange)="onPageChange($event)"
      (pageSizeChange)="onPageSizeChange($event)">
    </app-pagination>
  </div>
</div>
