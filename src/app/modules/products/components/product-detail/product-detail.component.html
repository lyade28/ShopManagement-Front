<div class="product-detail-container fade-in" *ngIf="product">
  <div class="page-header">
    <div>
      <div class="breadcrumb">
        <a routerLink="/products">Produits</a>
        <span>/</span>
        <span>{{ product.name }}</span>
      </div>
      <h1>{{ product.name }}</h1>
      <p class="subtitle" *ngIf="product.sku">Code: {{ product.sku }}</p>
    </div>
    <div class="header-actions">
      <a [routerLink]="['/products/edit', product.id]" class="btn btn-primary">
        <i class="bi bi-pencil"></i>
        Modifier
      </a>
      <button (click)="deleteProduct()" class="btn btn-secondary">
        <i class="bi bi-trash"></i>
        Supprimer
      </button>
    </div>
  </div>

  <div class="detail-grid">
    <!-- Informations principales -->
    <div class="detail-card card">
      <h3 class="card-title">Informations principales</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="info-label">Nom</span>
          <span class="info-value">{{ product.name }}</span>
        </div>
        <div class="info-item" *ngIf="product.sku">
          <span class="info-label">Code produit (SKU)</span>
          <span class="info-value">{{ product.sku }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Catégorie</span>
          <span class="info-value">
            <span class="category-badge">{{ getCategoryName() }}</span>
          </span>
        </div>
        <div class="info-item">
          <span class="info-label">Unité de mesure</span>
          <span class="info-value">{{ product.unit }}</span>
        </div>
        <div class="info-item">
          <span class="info-label">Statut</span>
          <span class="info-value">
            <span class="status-badge" [class.active]="product.is_active"
                  [class.inactive]="!product.is_active">
              {{ product.is_active ? 'Actif' : 'Inactif' }}
            </span>
          </span>
        </div>
      </div>
    </div>

    <!-- Prix et marge -->
    <div class="detail-card card">
      <h3 class="card-title">Prix et marge</h3>
      <div class="price-info">
        <div class="price-item">
          <span class="price-label">Prix d'achat</span>
          <span class="price-value">{{ product.purchase_price | currencyFormat }}</span>
        </div>
        <div class="price-item">
          <span class="price-label">Prix de vente</span>
          <span class="price-value selling">{{ product.selling_price | currencyFormat }}</span>
        </div>
        <div class="price-item">
          <span class="price-label">Marge bénéficiaire</span>
          <span class="price-value profit">
            {{ product.selling_price - product.purchase_price | currencyFormat }}
            ({{ ((product.selling_price - product.purchase_price) / product.purchase_price * 100).toFixed(1) }}%)
          </span>
        </div>
      </div>
    </div>

    <!-- Stock -->
    <div class="detail-card card">
      <h3 class="card-title">Stock</h3>
      <div class="stock-info-large">
        <div class="stock-value-large">
          Stock non disponible (voir inventaire)
        </div>
        <div class="stock-details">
          <div class="stock-detail-item">
            <span class="stock-label">Information</span>
            <span class="stock-min">Le stock est géré dans le module Inventaire</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Attributs spécifiques -->
    <div class="detail-card card full-width" *ngIf="hasAttributes()">
      <h3 class="card-title">Caractéristiques spécifiques</h3>
      <div class="attributes-display">
        <div class="attribute-item" *ngFor="let key of getAttributeKeys()">
          <span class="attribute-label">{{ getAttributeLabel(key) }}</span>
          <span class="attribute-value">{{ product.attributes[key] }}</span>
        </div>
      </div>
    </div>

    <!-- Description -->
    <div class="detail-card card full-width" *ngIf="product.description">
      <h3 class="card-title">Description</h3>
      <p class="description-text">{{ product.description }}</p>
    </div>
  </div>
</div>
